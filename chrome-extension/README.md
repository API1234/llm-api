# 夜游神 Pualy - 英语词汇学习 Chrome 扩展

一个功能强大的英语词汇学习 Chrome 扩展，帮助您轻松收集、管理和复习英语单词。

## ✨ 主要功能

### 📚 词汇管理
- **智能单词收集**：从任意网页选中文本，一键保存到词汇表
- **自动信息补充**：自动获取单词的音标、词性、释义等信息
- **单词规范化**：自动处理复数转单数、大小写统一
- **关联词查找**：基于词根自动查找并显示关联词（如：hallucination → hallucinate, hallucinatory）

### 🎯 复习系统
- **智能复习计划**：基于艾宾浩斯遗忘曲线，自动安排复习时间
- **今日待复习**：显示今天需要复习的单词
- **历史待复习**：查看所有待复习的单词
- **复习记录**：记录每次复习时间，追踪学习进度

### 🎨 界面特色
- **独立词汇表页面**：访问词汇表页面管理词汇
- **多标签页管理**：支持"全部"、"单词表"、"今日待复习"、"历史待复习"四个标签
- **现代化 UI**：使用 Tailwind CSS 构建的美观界面，支持主题切换
- **响应式布局**：适配不同屏幕尺寸

### 🔧 实用工具
- **快捷键支持**：`Alt+Shift+S` 快速保存选中文本
- **右键菜单**：右键选中文本即可保存
- **搜索和排序**：支持按时间、字母顺序排序，快速搜索单词
- **数据导出**：支持导出词汇表数据

## 📦 安装方法

### 从源码安装

1. **编译 CSS 文件（必需）**
   
   由于 Chrome 扩展无法加载外部 CDN，需要先编译 Tailwind CSS：
   
   ```bash
   # 在项目根目录运行
   pnpm run build:chrome
   
   # 或者进入 chrome-extension 目录
   cd chrome-extension
   npx tailwindcss -i ./styles/popup.css -o ./styles/popup.min.css --minify
   ```

2. **加载扩展**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启"开发者模式"（右上角开关）
   - 点击"加载已解压的扩展程序"
   - 选择 `chrome-extension` 文件夹

3. **完成安装**
   - 扩展安装成功后，浏览器工具栏会显示扩展图标
   - 点击扩展图标，选择"词汇表"按钮即可打开词汇表页面

**注意**：每次修改 `popup.html` 或 `styles/popup.css` 后，都需要重新运行编译命令。

## 🚀 使用指南

### 添加单词

#### 方法一：从网页保存
1. 在任意网页选中单词或句子
2. 右键选择"保存到词汇表"或按 `Alt+Shift+S`
3. 如果是单词，直接保存；如果是句子，系统会提示选择关联的单词

#### 方法二：手动添加
1. 点击扩展图标，选择"词汇表"按钮打开词汇表页面
2. 点击"添加单词"按钮
3. 输入单词，系统会自动：
   - 规范化单词（转小写、复数转单数）
   - 获取音标、词性、释义
   - 查找关联词

### 管理词汇

- **查看单词**：在词汇表页面浏览所有单词
- **添加例句**：点击单词卡片，在输入框中添加例句
- **删除单词**：点击单词卡片右上角的删除按钮
- **刷新信息**：点击刷新按钮，重新获取单词信息
- **搜索单词**：使用顶部搜索框快速查找
- **排序**：使用排序下拉框按时间或字母顺序排序

### 复习单词

1. **查看待复习**：切换到"今日待复习"或"历史待复习"标签
2. **标记复习**：点击单词卡片，系统会自动记录复习时间
3. **复习计划**：系统会根据复习时间自动安排下次复习（1天、3天、7天、15天、30天）

### 标签页功能

- **全部**：显示所有单词和复习列表
- **单词表**：仅显示词汇表
- **今日待复习**：显示今天需要复习的单词
- **历史待复习**：显示所有待复习的单词

## 🛠️ 技术特性

### 核心技术
- **Manifest V3**：使用最新的 Chrome 扩展规范
- **Service Worker**：后台服务，处理数据存储和消息传递
- **Content Scripts**：页面内容脚本，实现网页交互
- **Chrome Storage API**：本地数据存储
- **Tailwind CSS**：现代化的 CSS 框架，用于 popup 界面样式

### 智能功能实现

#### 单词规范化
- **复数转单数**：智能识别并转换复数形式（如：hallucinations → hallucination）
- **大小写统一**：自动转换为小写（如：Hallucination → hallucination）
- **词根提取**：递归去除后缀，提取词根（如：accordingly → accord）

#### 关联词查找
- **词根生成**：基于词根生成可能的词形变化
- **API 验证**：通过 Free Dictionary API 验证词是否存在
- **智能匹配**：优先验证常见词形（-ing, -ed, -s, -ance 等）

#### 单词信息获取
- **Free Dictionary API**：获取音标、词性、释义
- **自动补充**：添加单词时自动获取信息
- **手动刷新**：支持手动刷新单词信息

### 数据存储
- 所有数据存储在 Chrome 本地存储中
- 支持数据导出和导入
- 数据格式：JSON

## 📁 项目结构

```
chrome-extension/
├── manifest.json          # 扩展配置文件
├── rules_1.json          # 网络请求规则（广告拦截）
├── pages/                 # 页面文件
│   └── popup.html        # 弹出窗口（使用 Tailwind CSS）
├── src/                   # 源代码
│   ├── background.js     # 后台服务脚本（处理词汇保存）
│   ├── content_script.js # 内容脚本（文本选择、自动登录等）
│   └── popup.js          # 弹出窗口脚本
├── styles/                # 样式文件
│   ├── ui.css            # UI 样式（用于 board 页面）
│   └── cover.css         # 覆盖样式（站点特定样式）
├── assets/                # 资源文件
│   └── avatar.png        # 扩展图标
└── README.md             # 项目文档
```

**注意**：词汇表页面已集成到主项目的 Next.js 应用中（`/board` 路由），插件负责收集和保存词汇数据。

## 🔑 快捷键

- `Alt+Shift+S`：保存选中文本到词汇表

## 🌐 API 使用

### Free Dictionary API
- **用途**：获取单词的音标、词性、释义
- **地址**：`https://api.dictionaryapi.dev/api/v2/entries/en/{word}`
- **免费**：无需 API Key

## ⚙️ 配置说明

### manifest.json 主要配置

- **权限**：
  - `storage`：本地数据存储
  - `activeTab`：访问当前标签页
  - `tabs`：管理标签页
  - `scripting`：注入脚本
  - `contextMenus`：右键菜单
  - `declarativeNetRequest`：网络请求拦截（广告拦截）

- **内容脚本**：
  - 全局脚本：处理文本选择、快捷键保存
  - 特定网站：应用覆盖样式（知乎、虎牙等）
  - 小红书：自动登录功能（可选）

## 🎨 样式优化

### Tailwind CSS 集成

popup 界面已使用 Tailwind CSS 进行样式优化：

- **响应式设计**：适配不同屏幕尺寸
- **深色模式支持**：自动适配系统主题
- **主题切换**：支持 5 种主题预设（电光青蓝、霓虹紫、赛博粉、荧光绿、极夜蓝）
- **现代化 UI**：使用 Tailwind 的工具类构建美观界面

### 主题预设

- **电光青蓝**（默认）：`#00e5ff`
- **霓虹紫**：`#8b5cf6`
- **赛博粉**：`#ff4d8d`
- **荧光绿**：`#00e676`
- **极夜蓝**：`#60a5fa`

## 🐛 已知问题

1. **ConceptNet API**：目前返回 502 错误，已禁用，使用词根生成方案作为替代
2. **复数转单数**：基于规则实现，可能无法覆盖所有特殊情况

## 🔮 未来计划

- [ ] 支持多语言
- [ ] 添加单词发音功能
- [ ] 支持云端同步（与 Next.js 后端集成）
- [ ] 添加学习统计和报告
- [ ] 支持自定义复习计划
- [ ] 添加单词卡片导出功能

## 📝 开发说明

### 本地开发

1. **修改代码**：直接编辑源文件
2. **重新加载**：在 `chrome://extensions/` 页面点击扩展的"重新加载"按钮
3. **调试**：
   - 后台脚本：在扩展管理页面点击"service worker"链接
   - 内容脚本：在网页中打开开发者工具
   - 页面脚本：在对应页面打开开发者工具

### 代码规范

- 使用 ES6+ 语法
- 异步操作使用 `async/await`
- 错误处理使用 `try/catch`
- 代码注释使用中文
- Popup 界面使用 Tailwind CSS 类名

## 📄 许可证

本项目为个人使用项目，仅供学习交流。

## 👤 作者

阿皮（Pualy）

## 🙏 致谢

- [Free Dictionary API](https://dictionaryapi.dev/) - 提供免费的单词信息 API
- [Tailwind CSS](https://tailwindcss.com/) - 现代化的 CSS 框架
- [ConceptNet](https://conceptnet.io/) - 知识图谱 API（已禁用）

---

**注意**：本项目已迁移到 Next.js 项目中，Chrome 扩展代码位于 `chrome-extension/` 目录下。词汇表页面已集成到主项目的 `/board` 路由中。

